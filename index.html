<!DOCTYPEÂ html> <htmlÂ lang="en"> <head>   <metaÂ charset="utf-8"Â />   <metaÂ name="viewport"Â content="width=device-width,Â initial-scale=1,Â viewport-fit=cover"Â />   <title>FlappyÂ FishÂ â€“Â FreeÂ BrowserÂ Game</title>   <metaÂ name="description"Â content="FlappyÂ Fish:Â aÂ fast,Â lightweightÂ HTML5Â canvasÂ game.Â Tap/clickÂ toÂ swimÂ throughÂ coralÂ gaps.Â Mobile-friendly,Â soundÂ on/off,Â scoreÂ &Â highÂ score."Â />   <metaÂ name="theme-color"Â content="#0ea5e9"Â />   <style>  Â Â  :root{  Â Â Â Â  --bg:Â #031928;Â Â Â Â Â Â Â Â Â  /*Â deepÂ oceanÂ */  Â Â Â Â  --sea:Â #062d44;Â Â Â Â Â Â Â Â  /*Â seaÂ layerÂ */  Â Â Â Â  --accent:Â #0ea5e9;Â Â Â Â Â  /*Â cyanÂ */  Â Â Â Â  --coral:Â #ea580c;Â Â Â Â Â Â  /*Â orangeÂ coralÂ */  Â Â Â Â  --bubble:Â #93c5fd;Â Â Â Â Â  /*Â bubbleÂ */  Â Â Â Â  --text:Â #e6f3ff;  Â Â Â Â  --shadow:Â rgba(0,0,0,.25);  Â Â Â }  Â Â Â *Â {Â box-sizing:Â border-box;Â }  Â Â  html,Â bodyÂ {Â height:Â 100%;Â }  Â Â  bodyÂ {  Â Â Â Â  margin:Â 0;Â font-family:Â system-ui,Â -apple-system,Â SegoeÂ UI,Â Roboto,Â Ubuntu,Â Cantarell,Â "HelveticaÂ Neue",Â Arial,Â "NotoÂ Sans",Â "AppleÂ ColorÂ Emoji",Â "SegoeÂ UIÂ Emoji";  Â Â Â Â  background:Â radial-gradient(1200pxÂ 800pxÂ atÂ 50%Â -20%,Â #0ea5e9Â 0%,Â var(--sea)Â 40%,Â var(--bg)Â 80%);  Â Â Â Â  color:Â var(--text);  Â Â Â Â  display:Â grid;Â place-items:Â center;Â padding:Â 0;Â overflow:Â hidden;  Â Â Â }  Â Â  .frameÂ {  Â Â Â Â  width:Â min(96vw,Â 560px);  Â Â Â Â  aspect-ratio:Â 9/16;Â /*Â mobileÂ portraitÂ */  Â Â Â Â  position:Â relative;Â border-radius:Â 24px;Â overflow:Â hidden;Â box-shadow:Â 0Â 20pxÂ 60pxÂ var(--shadow);  Â Â Â Â  background:Â linear-gradient(#063045,Â #02131e);  Â Â Â Â  border:Â 1pxÂ solidÂ rgba(255,255,255,.08);  Â Â Â }  Â Â  canvasÂ {Â width:Â 100%;Â height:Â 100%;Â display:Â block;Â }  Â Â  .hudÂ {Â position:Â absolute;Â inset:Â 0;Â pointer-events:Â none;Â }  Â Â  .topbarÂ {Â position:Â absolute;Â top:Â 8px;Â left:Â 8px;Â right:Â 8px;Â display:Â flex;Â gap:Â 8px;Â align-items:Â center;Â justify-content:Â space-between;Â pointer-events:Â auto;Â }  Â Â  .pillÂ {Â backdrop-filter:Â blur(8px);Â background:Â rgba(2,Â 19,Â 30,Â .5);Â border:Â 1pxÂ solidÂ rgba(255,255,255,.08);Â border-radius:Â 999px;Â padding:Â 8pxÂ 12px;Â display:Â inline-flex;Â align-items:Â center;Â gap:Â 8px;Â box-shadow:Â insetÂ 0Â 1pxÂ 0Â rgba(255,255,255,.06);Â }  Â Â  .btnÂ {Â cursor:Â pointer;Â user-select:Â none;Â }  Â Â  .btn:activeÂ {Â transform:Â translateY(1px);Â }  Â Â  .scoreÂ {Â font-weight:Â 800;Â letter-spacing:Â .5px;Â }  Â Â  .centerÂ {Â position:Â absolute;Â inset:Â 0;Â display:Â grid;Â place-items:Â center;Â pointer-events:Â none;Â text-align:Â center;Â padding:Â 16px;Â }  Â Â  .cardÂ {Â pointer-events:Â auto;Â max-width:Â 90%;Â backdrop-filter:Â blur(10px);Â background:Â rgba(2,19,30,.6);Â border:Â 1pxÂ solidÂ rgba(255,255,255,.1);Â border-radius:Â 16px;Â padding:Â 16px;Â box-shadow:Â 0Â 12pxÂ 32pxÂ var(--shadow);Â }  Â Â  h1Â {Â font-size:Â 22px;Â margin:Â 0Â 0Â 8px;Â }  Â Â  pÂ {Â margin:Â 6pxÂ 0;Â opacity:Â .9;Â }  Â Â  .primaryÂ {Â display:Â inline-block;Â margin-top:Â 10px;Â padding:Â 10pxÂ 14px;Â border-radius:Â 12px;Â background:Â linear-gradient(135deg,Â #22d3ee,Â #0ea5e9);Â color:Â #001018;Â font-weight:Â 800;Â cursor:Â pointer;Â text-decoration:Â none;Â }  Â Â  .secondaryÂ {Â display:Â inline-block;Â margin-left:Â 8px;Â padding:Â 10pxÂ 14px;Â border-radius:Â 12px;Â background:Â rgba(255,255,255,.08);Â color:Â var(--text);Â font-weight:Â 700;Â cursor:Â pointer;Â text-decoration:Â none;Â }  Â Â  .bottomÂ {Â position:Â absolute;Â left:Â 0;Â right:Â 0;Â bottom:Â 8px;Â display:Â flex;Â justify-content:Â center;Â pointer-events:Â none;Â }  Â Â  .ad-bannerÂ {Â width:Â calc(100%Â -Â 16px);Â height:Â 60px;Â max-width:Â 440px;Â border-radius:Â 12px;Â background:Â rgba(255,255,255,.06);Â border:Â 1pxÂ dashedÂ rgba(255,255,255,.25);Â display:Â grid;Â place-items:Â center;Â color:Â #bcd7ff;Â font-size:Â 12px;Â pointer-events:Â auto;Â }  Â Â  .interstitialÂ {Â position:Â absolute;Â inset:Â 0;Â display:Â none;Â place-items:Â center;Â background:Â rgba(0,0,0,.6);Â backdrop-filter:Â blur(2px);Â }  Â Â  .interstitialÂ .contentÂ {Â width:Â 86%;Â max-width:Â 420px;Â background:Â #071a28;Â border:Â 1pxÂ solidÂ rgba(255,255,255,.1);Â border-radius:Â 16px;Â padding:Â 16px;Â text-align:Â center;Â }  Â Â  .mutedÂ {Â opacity:Â .7Â }  Â Â  .tinyÂ {Â font-size:Â 11px;Â opacity:Â .8Â }  Â Â  /*Â UtilityÂ */  Â Â  .rowÂ {Â display:Â inline-flex;Â gap:Â 8px;Â align-items:Â center;Â }   </style> </head> <body>   <divÂ class="frame"Â id="frame">  Â Â  <canvasÂ id="game"Â width="360"Â height="640"Â aria-label="FlappyÂ FishÂ Game"></canvas>  Â Â  <divÂ class="hud">  Â Â Â Â  <divÂ class="topbar">  Â Â Â Â Â Â  <divÂ class="pill">  Â Â Â Â Â Â Â Â  <span>ğŸŸÂ FlappyÂ Fish</span>  Â Â Â Â Â Â  </div>  Â Â Â Â Â Â  <divÂ class="row">  Â Â Â Â Â Â Â Â  <divÂ class="pillÂ score"Â id="scorePill">Score:Â 0</div>  Â Â Â Â Â Â Â Â  <divÂ class="pill"Â id="soundBtn"Â role="button"Â aria-pressed="false"Â title="ToggleÂ sound">ğŸ”Š</div>  Â Â Â Â Â Â Â Â  <divÂ class="pillÂ btn"Â id="pauseBtn"Â role="button"Â aria-pressed="false"Â title="Pause/Resume">â¸ï¸</div>  Â Â Â Â Â Â  </div>  Â Â Â Â  </div>  Â Â Â Â  <divÂ class="center"Â id="startOverlay">  Â Â Â Â Â Â  <divÂ class="card">  Â Â Â Â Â Â Â Â  <h1>TapÂ toÂ Swim</h1>  Â Â Â Â Â Â Â Â  <p>NavigateÂ throughÂ coralÂ gaps.Â Touch,Â click,Â orÂ pressÂ <strong>Space</strong>.</p>  Â Â Â Â Â Â Â Â  <pÂ class="tiny">Best:Â <spanÂ id="bestStart">0</span></p>  Â Â Â Â Â Â Â Â  <aÂ class="primary"Â id="playBtn">Play</a>  Â Â Â Â Â Â Â Â  <aÂ class="secondary"Â id="howBtn">HowÂ toÂ Play</a>  Â Â Â Â Â Â  </div>  Â Â Â Â  </div>  Â Â Â Â  <divÂ class="center"Â id="howOverlay"Â style="display:none">  Â Â Â Â Â Â  <divÂ class="card">  Â Â Â Â Â Â Â Â  <h1>HowÂ toÂ Play</h1>  Â Â Â Â Â Â Â Â  <p>â€¢Â Tap/click/SpaceÂ toÂ swimÂ up.Â AvoidÂ coral.</p>  Â Â Â Â Â Â Â Â  <p>â€¢Â PassÂ aÂ gapÂ toÂ scoreÂ +1.Â BeatÂ yourÂ bestÂ score!</p>  Â Â Â Â Â Â Â Â  <p>â€¢Â WorksÂ onÂ mobileÂ andÂ desktop.</p>  Â Â Â Â Â Â Â Â  <aÂ class="primary"Â id="closeHow">GotÂ it</a>  Â Â Â Â Â Â  </div>  Â Â Â Â  </div>  Â Â Â Â  <divÂ class="center"Â id="gameOverOverlay"Â style="display:none">  Â Â Â Â Â Â  <divÂ class="card">  Â Â Â Â Â Â Â Â  <h1>GameÂ Over</h1>  Â Â Â Â Â Â Â Â  <p>Score:Â <strongÂ id="finalScore">0</strong>Â &nbsp;â€¢&nbsp;Â Best:Â <strongÂ id="bestScore">0</strong></p>  Â Â Â Â Â Â Â Â  <aÂ class="primary"Â id="retryBtn">PlayÂ Again</a>  Â Â Â Â Â Â Â Â  <aÂ class="secondary"Â id="shareBtn">Share</a>  Â Â Â Â Â Â  </div>  Â Â Â Â  </div>  Â Â Â Â  <divÂ class="bottom">  Â Â Â Â Â Â  <!--Â ğŸ§¾Â AdÂ BannerÂ Placeholder:Â ReplaceÂ thisÂ divÂ withÂ yourÂ AdSenseÂ bannerÂ codeÂ afterÂ approval.Â -->  Â Â Â Â Â Â  <divÂ class="ad-banner"Â id="adBanner">AdÂ bannerÂ placeholderÂ (insertÂ AdSenseÂ codeÂ here)</div>  Â Â Â Â  </div>  Â Â Â Â  <!--Â InterstitialÂ PlaceholderÂ (triggeredÂ everyÂ fewÂ fails)Â -->  Â Â Â Â  <divÂ class="interstitial"Â id="interstitial">  Â Â Â Â Â Â  <divÂ class="content">  Â Â Â Â Â Â Â Â  <p>InterstitialÂ AdÂ (placeholder)</p>  Â Â Â Â Â Â Â Â  <pÂ class="tiny">ReplaceÂ withÂ yourÂ AdSense/AdÂ networkÂ fullscreenÂ unit.</p>  Â Â Â Â Â Â Â Â  <aÂ class="primary"Â id="closeInterstitial">Continue</a>  Â Â Â Â Â Â  </div>  Â Â Â Â  </div>  Â Â  </div>   </div>   <script>  Â Â  //Â ======Â Utility:Â DPR-friendlyÂ canvasÂ sizingÂ ======  
  constÂ canvasÂ =Â document.getElementById('game');  Â Â  constÂ ctxÂ =Â canvas.getContext('2d');  Â Â  functionÂ fitCanvas()Â {  Â Â Â Â  constÂ dprÂ =Â Math.max(1,Â Math.min(2,Â window.devicePixelRatioÂ ||Â 1));  Â Â Â Â  constÂ cssWÂ =Â canvas.clientWidthÂ |Â 0;  Â Â Â Â  constÂ cssHÂ =Â canvas.clientHeightÂ |Â 0;  Â Â Â Â  ifÂ (!cssWÂ ||Â !cssH)Â return;  Â Â Â Â Â canvas.widthÂ =Â Math.round(cssWÂ *Â dpr);  Â Â Â Â Â canvas.heightÂ =Â Math.round(cssHÂ *Â dpr);  Â Â Â Â Â ctx.setTransform(dpr,Â 0,Â 0,Â dpr,Â 0,Â 0);Â //Â drawÂ usingÂ CSSÂ pixels  Â Â 
                                                                                                                    }  Â Â  newÂ ResizeObserver(fitCanvas).observe(canvas);  Â Â  window.addEventListener('orientationchange',Â ()Â =>Â setTimeout(fitCanvas,Â 120));  Â Â  //Â ======Â SimpleÂ AudioÂ (WebAudio,Â noÂ externalÂ libs)Â ======  Â Â  
  constÂ AudioCtxÂ =Â window.AudioContextÂ ||Â window.webkitAudioContext;  Â Â  letÂ audioCtxÂ =Â null;Â //Â createdÂ lazilyÂ onÂ firstÂ userÂ gesture  Â Â 
  letÂ soundEnabledÂ =Â true;  Â Â  constÂ soundBtnÂ =Â document.getElementById('soundBtn');  Â Â  functionÂ initAudio()Â {  Â Â Â Â  ifÂ (!audioCtx)Â audioCtxÂ =Â newÂ AudioCtx();  Â Â Â }  Â Â  functionÂ playBeep({freq=600,Â time=0.07,Â type='sine',Â gain=0.08}={})Â {  Â Â Â Â  ifÂ (!soundEnabled)Â return;  Â Â Â Â  tryÂ {  Â Â Â Â Â Â  initAudio();  Â Â Â Â Â Â  constÂ t0Â =Â audioCtx.currentTime;  Â Â Â Â Â Â  constÂ oscÂ =Â audioCtx.createOscillator();  Â Â Â Â Â Â  constÂ gÂ =Â audioCtx.createGain();  Â Â Â Â Â Â Â osc.typeÂ =Â type;Â osc.frequency.setValueAtTime(freq,Â t0);  Â Â Â Â Â Â Â g.gain.setValueAtTime(gain,Â t0);  Â Â Â Â Â Â Â g.gain.exponentialRampToValueAtTime(0.0001,Â t0Â +Â time);  Â Â Â Â Â Â Â osc.connect(g).connect(audioCtx.destination);  Â Â Â Â Â Â Â osc.start(t0);Â osc.stop(t0Â +Â time);  Â Â Â Â Â }Â catchÂ {}  Â Â Â }
  functionÂ playSwim(){Â playBeep({freq:Â 520,Â time:Â .06,Â type:'triangle',Â gain:.06});Â }  Â Â Â functionÂ playScore(){Â playBeep({freq:Â 800,Â time:Â .09,Â type:'square',Â gain:.06});Â }  Â Â Â functionÂ playHit(){Â playBeep({freq:Â 120,Â time:Â .16,Â type:'sawtooth',Â gain:.08});Â }  Â Â Â soundBtn.addEventListener('click',Â ()Â =>Â {  Â Â Â Â Â soundEnabledÂ =Â !soundEnabled;Â soundBtn.textContentÂ =Â soundEnabledÂ ?Â 'ğŸ”Š'Â :Â 'ğŸ”‡';  Â Â Â Â Â soundBtn.setAttribute('aria-pressed',Â String(!soundEnabled));  Â Â Â Â Â ifÂ (soundEnabled)Â initAudio();  Â Â Â });  Â Â Â //Â ======Â GameÂ StateÂ ======
  constÂ startOverlayÂ =Â document.getElementById('startOverlay');  Â Â Â constÂ howOverlayÂ =Â document.getElementById('howOverlay');  Â Â Â constÂ closeHowÂ =Â document.getElementById('closeHow');  Â Â Â constÂ playBtnÂ =Â document.getElementById('playBtn');  Â Â Â constÂ howBtnÂ =Â document.getElementById('howBtn');  Â Â Â constÂ pauseBtnÂ =Â document.getElementById('pauseBtn');  Â Â Â constÂ scorePillÂ =Â document.getElementById('scorePill');  Â Â Â constÂ gameOverOverlayÂ =Â document.getElementById('gameOverOverlay');  Â Â Â constÂ retryBtnÂ =Â document.getElementById('retryBtn');  Â Â Â constÂ shareBtnÂ =Â document.getElementById('shareBtn');  Â Â Â constÂ finalScoreElÂ =Â document.getElementById('finalScore');  Â Â Â constÂ bestScoreElÂ =Â document.getElementById('bestScore');  Â Â Â constÂ bestStartElÂ =Â document.getElementById('bestStart');  Â Â Â constÂ interstitialÂ =Â document.getElementById('interstitial');  Â Â Â constÂ closeInterstitialÂ =Â document.getElementById('closeInterstitial');  Â Â Â letÂ runningÂ =Â false,Â pausedÂ =Â false,Â gameOverÂ =Â false;  Â Â Â letÂ scoreÂ =Â 0;Â letÂ bestÂ =Â Number(localStorage.getItem('ff_best')||0);  Â Â Â bestStartEl.textContentÂ =Â best;  Â Â Â constÂ GÂ =Â 1250;Â Â Â Â Â Â Â Â Â Â //Â gravityÂ px/s^2  
  constÂ FLAPÂ =Â -450;Â Â Â Â Â Â Â //Â impulseÂ velocity  
  constÂ MAX_VYÂ =Â 720;Â Â Â Â Â Â //Â clampÂ fallÂ speed  Â Â Â //Â fishÂ propertiesÂ (inÂ CSSÂ pixels)
  constÂ fishÂ =Â {Â x:Â 90,Â y:Â 280,Â vy:Â 0,Â r:Â 14,Â rot:Â 0Â };  Â Â Â //Â Obstacles  
  constÂ pipesÂ =Â [];Â //Â each:Â {x,Â gapY} 
  constÂ pipeGapÂ =Â 200;Â Â Â Â Â Â Â Â Â Â Â //Â verticalÂ gapÂ size  
  constÂ pipeWÂ =Â 50;Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â pipeÂ width  
  constÂ pipeSpacingÂ =Â 220;Â Â Â Â Â Â Â //Â distanceÂ betweenÂ pipes  
  constÂ pipeSpeedÂ =Â 150;Â Â Â Â Â Â Â Â Â //Â px/sÂ leftward  Â 
  //Â SpawnÂ management  
  letÂ lastSpawnXÂ =Â 0;  Â Â Â functionÂ resetGame()Â {  Â Â Â Â Â runningÂ =Â true;Â pausedÂ =Â false;Â gameOverÂ =Â false;Â scoreÂ =Â 0;  Â Â Â Â Â fish.xÂ =Â 90;Â fish.yÂ =Â canvas.clientHeightÂ *Â 0.45;Â fish.vyÂ =Â 0;Â fish.rotÂ =Â 0;  Â Â Â Â Â pipes.lengthÂ =Â 0;Â lastSpawnXÂ =Â 0;  Â Â Â Â Â scorePill.textContentÂ =Â `Score:Â ${score}`;  Â Â Â Â Â hide(gameOverOverlay);Â hide(startOverlay);Â hide(howOverlay);  Â Â Â Â Â fitCanvas();  Â Â Â }  Â Â Â functionÂ show(el){Â el.style.displayÂ =Â ''Â }  Â Â Â functionÂ hide(el){Â el.style.displayÂ =Â 'none'Â }  Â Â Â playBtn.addEventListener('click',Â ()Â =>Â {Â initAudio();Â resetGame();Â });  Â Â Â howBtn.addEventListener('click',Â ()Â =>Â {Â show(howOverlay);Â });  Â Â Â closeHow.addEventListener('click',Â ()Â =>Â {Â hide(howOverlay);Â });  Â Â Â retryBtn.addEventListener('click',Â ()Â =>Â {Â maybeShowInterstitial();Â resetGame();Â });  Â Â Â pauseBtn.addEventListener('click',Â ()Â =>Â {Â ifÂ (!running)Â return;Â pausedÂ =Â !paused;Â pauseBtn.textContentÂ =Â pausedÂ ?Â 'â–¶ï¸'Â :Â 'â¸ï¸';Â });  Â Â Â shareBtn.addEventListener('click',Â asyncÂ ()Â =>Â {  Â Â Â Â Â constÂ textÂ =Â `IÂ scoredÂ ${score}Â inÂ FlappyÂ Fish!Â CanÂ youÂ beatÂ me?`;  Â Â Â Â Â tryÂ {Â ifÂ (navigator.share)Â {Â awaitÂ navigator.share({Â text,Â url:Â location.href,Â title:Â 'FlappyÂ Fish'Â });Â return;Â }Â }Â catchÂ {}  Â Â Â Â Â navigator.clipboard?.writeText(`${text}Â ${location.href}`);  Â Â Â Â Â alert('ShareÂ textÂ copiedÂ toÂ clipboard!');  Â Â Â });  Â Â Â //Â Interstitial:Â everyÂ 3rdÂ fail
  letÂ failCountÂ =Â Number(localStorage.getItem('ff_fails')||0);  Â Â Â functionÂ maybeShowInterstitial(){  Â Â Â Â Â failCount++;Â localStorage.setItem('ff_fails',Â String(failCount));  Â Â Â Â Â ifÂ (failCountÂ %Â 3Â ===Â 0)Â {  Â Â Â Â Â Â Â interstitial.style.displayÂ =Â 'grid';  Â Â Â Â Â }  Â Â Â }  Â Â Â closeInterstitial.addEventListener('click',Â ()Â =>Â interstitial.style.displayÂ =Â 'none');  Â Â 
  //Â Controls  Â 
  functionÂ flap(){Â ifÂ (!runningÂ ||Â pausedÂ ||Â gameOver)Â return;Â fish.vyÂ =Â FLAP;Â playSwim();Â }  Â Â Â window.addEventListener('keydown',Â eÂ =>Â {  Â Â Â Â Â ifÂ (e.codeÂ ===Â 'Space')Â {Â e.preventDefault();Â ifÂ (!running)Â resetGame();Â elseÂ flap();Â }  Â Â Â Â Â ifÂ (e.codeÂ ===Â 'KeyP')Â {Â pausedÂ =Â !paused;Â pauseBtn.textContentÂ =Â pausedÂ ?Â 'â–¶ï¸'Â :Â 'â¸ï¸';Â }  Â Â Â },Â {passive:false});  Â Â Â canvas.addEventListener('pointerdown',Â (e)=>{Â e.preventDefault();Â ifÂ (!running)Â resetGame();Â elseÂ flap();Â },Â {passive:false});  Â Â Â document.addEventListener('visibilitychange',Â ()Â =>Â {Â ifÂ (document.hidden)Â pausedÂ =Â true;Â });  Â Â Â //Â ======Â GameÂ LoopÂ ======  
  letÂ lastÂ =Â performance.now();  Â Â Â functionÂ loop(now){  Â Â Â Â Â requestAnimationFrame(loop);  Â Â Â Â Â constÂ dtÂ =Â Math.min(0.033,Â (nowÂ -Â last)Â /Â 1000);Â lastÂ =Â now;  Â Â Â Â Â ifÂ (!runningÂ ||Â paused)Â {Â draw();Â return;Â }  Â Â Â Â Â update(dt);Â draw();  Â Â Â }  Â Â Â functionÂ update(dt){  Â Â Â Â Â //Â SpawnÂ pipesÂ asÂ worldÂ scrolls
    constÂ needSpawnÂ =Â (pipes.lengthÂ ===Â 0)Â ||Â (canvas.clientWidthÂ -Â (pipes[pipes.length-1]?.xÂ ??Â 0)Â >=Â pipeSpacing);  Â Â Â Â Â ifÂ (needSpawn){  Â Â Â Â Â Â Â constÂ marginÂ =Â 80;Â //Â keepÂ gapÂ fullyÂ onÂ screen  
                                                                                                                                          constÂ hÂ =Â canvas.clientHeight;  Â Â Â Â Â Â Â constÂ gapYÂ =Â Math.random()Â *Â (hÂ -Â margin*2Â -Â pipeGap)Â +Â marginÂ +Â pipeGap/2;  Â Â Â Â Â Â Â pipes.push({Â x:Â canvas.clientWidthÂ +Â pipeW,Â gapY,Â scored:Â falseÂ });  Â Â Â Â Â }  Â Â Â Â Â //Â MoveÂ pipes  
    forÂ (constÂ pÂ ofÂ pipes)Â p.xÂ -=Â pipeSpeedÂ *Â dt;  Â Â Â Â Â //Â DropÂ off-screenÂ pipes  
    whileÂ (pipes.lengthÂ &&Â pipes[0].xÂ +Â pipeWÂ <Â 0)Â pipes.shift();  Â Â Â Â Â //Â Physics
    fish.vyÂ =Â Math.min(MAX_VY,Â fish.vyÂ +Â GÂ *Â dt);  Â Â Â Â Â fish.yÂ +=Â fish.vyÂ *Â dt;  Â Â Â Â Â fish.rotÂ =Â Math.atan2(fish.vy,Â 300);  Â Â Â Â Â //Â CollisionsÂ &Â scoring 
    constÂ topÂ =Â 0,Â bottomÂ =Â canvas.clientHeight;  Â Â Â Â Â ifÂ (fish.yÂ -Â fish.rÂ <Â topÂ ||Â fish.yÂ +Â fish.rÂ >Â bottom){Â endGame();Â return;Â }  Â Â Â Â Â forÂ (constÂ pÂ ofÂ pipes){  Â Â Â Â Â Â Â constÂ inXÂ =Â fish.xÂ +Â fish.rÂ >Â p.xÂ &&Â fish.xÂ -Â fish.rÂ <Â p.xÂ +Â pipeW;  Â Â Â Â Â Â Â constÂ gapTopÂ =Â p.gapYÂ -Â pipeGap/2;Â constÂ gapBotÂ =Â p.gapYÂ +Â pipeGap/2;  Â Â Â Â Â Â Â ifÂ (inX){  Â Â Â Â Â Â Â Â Â ifÂ (fish.yÂ -Â fish.rÂ <Â gapTopÂ ||Â fish.yÂ +Â fish.rÂ >Â gapBot){Â endGame();Â return;Â }  Â Â Â Â Â Â Â }  Â Â Â Â Â Â Â ifÂ (!p.scoredÂ &&Â p.xÂ +Â pipeWÂ <Â fish.xÂ -Â fish.r){Â p.scoredÂ =Â true;Â score++;Â scorePill.textContentÂ =Â `Score:Â ${score}`;Â playScore();Â }  Â Â Â Â Â }  Â Â Â }  Â Â Â functionÂ endGame(){  Â Â Â Â Â runningÂ =Â false;Â gameOverÂ =Â true;Â playHit();  Â Â Â Â Â bestÂ =Â Math.max(best,Â score);Â localStorage.setItem('ff_best',Â String(best));  Â Â Â Â Â finalScoreEl.textContentÂ =Â score;Â bestScoreEl.textContentÂ =Â best;  Â Â Â Â Â show(gameOverOverlay);  Â Â Â }  Â Â Â functionÂ draw(){  Â Â Â Â Â constÂ wÂ =Â canvas.clientWidth,Â hÂ =Â canvas.clientHeight;  Â Â Â Â Â //Â ClearÂ waterÂ backgroundÂ withÂ gradientÂ b                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ctx.clearRect(0,0,w,h);  Â Â Â Â Â constÂ gradÂ =Â ctx.createLinearGradient(0,0,0,h);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          grad.addColorStop(0,Â '#07324b');  Â Â Â Â Â grad.addColorStop(.6,Â '#062b40');  Â Â Â Â Â grad.addColorStop(1,Â '#041c2a');  Â Â Â Â Â ctx.fillStyleÂ =Â grad;Â ctx.fillRect(0,0,w,h);  Â Â Â Â Â //Â BubblesÂ (lightweightÂ procedural)  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          constÂ tÂ =Â performance.now()Â *Â 0.001;  Â Â Â Â Â forÂ (letÂ i=0;i<16;i++){  Â Â Â Â Â Â Â constÂ bxÂ =Â (i*97Â %Â w);  Â Â Â Â Â Â Â constÂ byÂ =Â (hÂ -Â ((t*30Â +Â i*30)Â %Â (h+40)));  Â Â Â Â Â Â Â ctx.globalAlphaÂ =Â 0.10Â +Â (i%5)*0.03;  Â Â Â Â Â Â Â ctx.beginPath();Â ctx.arc(bx,Â by,Â 3Â +Â (i%3),Â 0,Â Math.PI*2);Â ctx.fillStyleÂ =Â '#93c5fd';Â ctx.fill();  Â Â Â Â Â }  Â Â Â Â Â ctx.globalAlphaÂ =Â 1;  Â Â Â Â Â //Â DrawÂ pipesÂ asÂ coralÂ columns  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          forÂ (constÂ pÂ ofÂ pipes){  Â Â Â Â Â Â Â ctx.fillStyleÂ =Â '#ea580c';  Â Â Â Â Â Â Â constÂ gapTopÂ =Â p.gapYÂ -Â pipeGap/2;Â constÂ gapBotÂ =Â p.gapYÂ +Â pipeGap/2;  Â Â Â Â Â Â Â //Â topÂ coral  Â Â Â Â Â Â Â 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 roundRect(ctx,Â p.x,Â -2,Â pipeW,Â gapTop+2,Â 10);  Â Â Â Â Â Â Â //Â bottomÂ coral 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 roundRect(ctx,Â p.x,Â gapBot,Â pipeW,Â h-gapBot+2,Â 10);  Â Â Â Â Â Â Â //Â subtleÂ textureÂ lines  Â Â Â Â Â Â Â 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ctx.strokeStyleÂ =Â 'rgba(0,0,0,.15)';Â ctx.lineWidthÂ =Â 2;  Â Â Â Â Â Â Â ctx.beginPath();Â ctx.moveTo(p.x+8,Â 0);Â ctx.lineTo(p.x+8,Â h);Â ctx.stroke();  Â Â Â Â Â }  Â Â Â Â Â //Â DrawÂ fish  Â Â Â Â Â 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ctx.save();  Â Â Â Â Â ctx.translate(fish.x,Â fish.y);Â ctx.rotate(fish.rot);  Â Â Â Â Â //Â body  Â Â Â Â Â 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ctx.fillStyleÂ =Â '#22d3ee';  Â Â Â Â Â ellipse(ctx,Â 0,Â 0,Â 22,Â 14);  Â Â Â Â Â //Â tail  Â Â Â Â Â 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ctx.fillStyleÂ =Â '#0ea5e9';  Â Â Â Â Â ctx.beginPath();Â ctx.moveTo(-18,Â -6);Â ctx.lineTo(-32,Â 0);Â ctx.lineTo(-18,Â 6);Â ctx.closePath();Â ctx.fill();  Â Â Â Â Â //Â eye  Â Â Â Â 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ctx.fillStyleÂ =Â '#fff';Â ctx.beginPath();Â ctx.arc(8,Â -3,Â 3.5,Â 0,Â Math.PI*2);Â ctx.fill();  Â Â Â Â Â ctx.fillStyleÂ =Â '#001018';Â ctx.beginPath();Â ctx.arc(9,Â -3,Â 1.5,Â 0,Â Math.PI*2);Â ctx.fill();  Â Â Â Â Â //Â bubbleÂ fromÂ mouth  Â Â 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ctx.globalAlphaÂ =Â 0.6;Â ctx.beginPath();Â ctx.arc(20Â +Â Math.sin(t*6)*2,Â -6Â +Â Math.cos(t*8),Â 2.2,Â 0,Â Math.PI*2);Â ctx.fillStyleÂ =Â '#bde0ff';Â ctx.fill();Â ctx.globalAlphaÂ =Â 1;  Â Â Â Â Â ctx.restore();  Â Â Â Â Â //Â GroundÂ gradientÂ atÂ bottom  Â Â Â Â 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          constÂ seabedÂ =Â ctx.createLinearGradient(0,Â h-100,Â 0,Â h);  Â Â Â Â Â seabed.addColorStop(0,Â 'rgba(234,88,12,.08)');  Â Â Â Â Â seabed.addColorStop(1,Â 'rgba(2,19,30,1)');  Â Â Â Â Â ctx.fillStyleÂ =Â seabed;Â ctx.fillRect(0,Â h-100,Â w,Â 100);  Â Â Â }  Â Â Â functionÂ roundRect(ctx,Â x,y,w,h,r){  Â Â Â Â Â constÂ rrÂ =Â Math.min(r,Â Math.abs(w)/2,Â Math.abs(h)/2);  Â Â Â Â Â ctx.beginPath();  Â Â Â Â Â ctx.moveTo(x+rr,Â y);  Â Â Â Â Â ctx.arcTo(x+w,Â y,Â x+w,Â y+h,Â rr);  Â Â Â Â Â ctx.arcTo(x+w,Â y+h,Â x,Â y+h,Â rr);  Â Â Â Â Â ctx.arcTo(x,Â y+h,Â x,Â y,Â rr);  Â Â Â Â Â ctx.arcTo(x,Â y,Â x+w,Â y,Â rr);  Â Â Â Â Â ctx.closePath();Â ctx.fill();  Â Â Â }  Â Â Â functionÂ ellipse(ctx,Â x,y,Â rx,Â ry){Â ctx.beginPath();Â ctx.ellipse(x,y,rx,ry,0,0,Math.PI*2);Â ctx.fill();Â }  Â Â Â //Â Boot  Â Â Â 
  fitCanvas();Â requestAnimationFrame(loop);  Â Â Â //Â ShowÂ startÂ overlayÂ initially
  show(startOverlay);  Â Â Â //Â =====Â MonetizationÂ IntegrationÂ NotesÂ =====  Â Â Â //Â 1)Â ReplaceÂ theÂ bannerÂ placeholderÂ divÂ (#adBanner)Â withÂ theÂ officialÂ AdSenseÂ codeÂ afterÂ yourÂ siteÂ isÂ approved.  Â Â Â //Â Â Â Â ExampleÂ (DOÂ NOTÂ pasteÂ yourÂ pubÂ idÂ hereÂ inÂ publicÂ repos):  Â Â Â //Â Â Â  <scriptÂ asyncÂ src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXX"Â crossorigin="anonymous"></script>  Â Â Â //Â Â Â  <insÂ class="adsbygoogle"Â style="display:block"Â data-ad-client="ca-pub-XXXX"Â data-ad-slot="YYYY"Â data-ad-format="auto"Â data-full-width-responsive="true"></ins>  Â Â Â //Â Â Â  <script>(adsbygoogleÂ =Â window.adsbygoogleÂ ||Â []).push({});</script>  Â Â Â //Â 2)Â ReplaceÂ theÂ interstitialÂ placeholderÂ (#interstitial)Â withÂ yourÂ network'sÂ fullscreenÂ interstitialÂ implementation.  Â Â Â //Â 3)Â ConsiderÂ anÂ "RemoveÂ Ads"Â buttonÂ thatÂ opensÂ aÂ Stripe/GumroadÂ checkoutÂ andÂ storesÂ aÂ flagÂ inÂ localStorageÂ toÂ hideÂ ads.   </script> </body> </html> Â 
